import{c as Oe,b as Ne,g as S,r as y,u as $e,R as p,S as Ce,a7 as w,a1 as ze,a2 as Ie,o as Te,k as a,F as Ee,j as ke,t as R,p as Be,G as F}from"./index-8379246e.js";import{p as Me,u as Ye,C as Fe,H as Ve}from"./DatePickerInput-ab403727.js";import{u as Re,I as U}from"./Input-dea308b8.js";import{u as G}from"./use-uncontrolled-17e2814f.js";import{P as V}from"./Popover-32617d60.js";import{I as He}from"./IconChevronLeft-e03a2f26.js";var qe=Object.defineProperty,Le=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t)=>{for(var r in t||(t={}))We.call(t,r)&&Q(e,r,t[r]);if(J)for(var r of J(t))Ae.call(t,r)&&Q(e,r,t[r]);return e},Ge=(e,t)=>Le(e,Ke(t)),Je=Oe((e,{captionSide:t,horizontalSpacing:r,verticalSpacing:o,fontSize:d,withBorder:i,withColumnBorders:c})=>{const u=`${Ne(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:Ge(Ue({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:i?u:void 0,"& caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:S({size:d,sizes:e.fontSizes}),padding:`${S({size:o,sizes:e.spacing})} ${S({size:r,sizes:e.spacing})}`},"& thead tr th":{borderBottom:u},"& tfoot tr th, & tbody tr th":{borderTop:u},"& tbody tr td":{padding:`${S({size:o,sizes:e.spacing})} ${S({size:r,sizes:e.spacing})}`,borderTop:u,fontSize:S({size:d,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:c?u:"none","&:last-of-type":{borderRight:"none",borderLeft:c?u:"none"}},"& tbody tr th":{borderRight:c?u:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}});const Qe=Je;var Xe=Object.defineProperty,Ze=Object.defineProperties,et=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tt=(e,t)=>{for(var r in t||(t={}))ee.call(t,r)&&X(e,r,t[r]);if(E)for(var r of E(t))te.call(t,r)&&X(e,r,t[r]);return e},rt=(e,t)=>Ze(e,et(t)),at=(e,t)=>{var r={};for(var o in e)ee.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&E)for(var o of E(e))t.indexOf(o)<0&&te.call(e,o)&&(r[o]=e[o]);return r};const ot={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},re=y.forwardRef((e,t)=>{const r=$e("Table",ot,e),{className:o,children:d,striped:i,highlightOnHover:c,captionSide:u,horizontalSpacing:x,verticalSpacing:D,fontSize:_,unstyled:l,withBorder:n,withColumnBorders:f,variant:m}=r,b=at(r,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:N,cx:B}=Qe({captionSide:u,verticalSpacing:D,horizontalSpacing:x,fontSize:_,withBorder:n,withColumnBorders:f},{unstyled:l,name:"Table",variant:m});return p.createElement(Ce,rt(tt({},b),{component:"table",ref:t,className:B(N.root,o),"data-striped":i||void 0,"data-hover":c||void 0}),d)});re.displayName="@mantine/core/Table";function st({date:e,maxDate:t,minDate:r}){return!(e==null||Number.isNaN(e.getTime())||t&&w(e).isAfter(t,"date")||r&&w(e).isBefore(r,"date"))}function nt(e){const t=new Date(e);return Number.isNaN(t.getTime())||!e?null:t}function lt(e,t){if(!e||!t)return t;const r=e.getHours(),o=e.getMinutes(),d=e.getSeconds(),i=e.getMilliseconds(),c=new Date(t);return c.setHours(r),c.setMinutes(o),c.setSeconds(d),c.setMilliseconds(i),c}var it=Object.defineProperty,ct=Object.defineProperties,dt=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))ae.call(t,r)&&Z(e,r,t[r]);if(k)for(var r of k(t))oe.call(t,r)&&Z(e,r,t[r]);return e},T=(e,t)=>ct(e,dt(t)),ut=(e,t)=>{var r={};for(var o in e)ae.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&k)for(var o of k(e))t.indexOf(o)<0&&oe.call(e,o)&&(r[o]=e[o]);return r};const pt={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0,size:"sm"},ft=y.forwardRef((e,t)=>{const r=Re("DateInput",pt,e),{inputProps:o,wrapperProps:d,value:i,defaultValue:c,onChange:u,clearable:x,clearButtonProps:D,popoverProps:_,getDayProps:l,locale:n,valueFormat:f,dateParser:m,minDate:b,maxDate:N,fixOnBlur:B,onFocus:H,onBlur:q,onClick:L,readOnly:$,name:se,form:ne,rightSection:le,unstyled:K,classNames:ie,styles:ce,allowDeselect:de,preserveTime:ue,date:pe,defaultDate:fe,onDateChange:ge}=r,he=ut(r,["inputProps","wrapperProps","value","defaultValue","onChange","clearable","clearButtonProps","popoverProps","getDayProps","locale","valueFormat","dateParser","minDate","maxDate","fixOnBlur","onFocus","onBlur","onClick","readOnly","name","form","rightSection","unstyled","classNames","styles","allowDeselect","preserveTime","date","defaultDate","onDateChange"]),{calendarProps:me,others:ve}=Me(he),M=Ye(),ye=m||(s=>{const g=w(s,f,M.getLocale(n)).toDate();return Number.isNaN(g.getTime())?nt(s):g}),W=x||de,O=s=>s?w(s).locale(M.getLocale(n)).format(f):"",[h,C,z]=G({value:i,defaultValue:c,finalValue:null,onChange:u}),[xe,Y]=G({value:pe,defaultValue:c||fe,finalValue:null,onChange:ge});y.useEffect(()=>{z&&Y(i)},[z,i]);const[_e,j]=y.useState(O(h));y.useEffect(()=>{j(O(h))},[M.getLocale(n)]);const[A,I]=y.useState(!1),be=s=>{const g=s.currentTarget.value;if(j(g),g.trim()===""&&W)C(null);else{const P=ye(g);st({date:P,minDate:b,maxDate:N})&&(C(P),Y(P))}},je=s=>{q==null||q(s),I(!1),B&&j(O(h))},Pe=s=>{H==null||H(s),I(!0)},Se=s=>{L==null||L(s),I(!0)},we=s=>T(v({},l==null?void 0:l(s)),{selected:w(h).isSame(s,"day"),onClick:()=>{const g=ue?lt(h,s):s,P=W&&w(h).isSame(s,"day")?null:g;C(P),!z&&j(O(P)),I(!1)}}),De=le||(x&&h&&!$?p.createElement(ze,v({variant:"transparent",onMouseDown:s=>s.preventDefault(),tabIndex:-1,onClick:()=>{C(null),!z&&j("")},unstyled:K},D)):null);return Ie(()=>{i!==void 0&&!A&&j(O(i))},[i]),p.createElement(p.Fragment,null,p.createElement(U.Wrapper,T(v({},d),{__staticSelector:"DateInput"}),p.createElement(V,v({opened:A,trapFocus:!1,position:"bottom-start",disabled:$,withRoles:!1},_),p.createElement(V.Target,null,p.createElement(U,T(v(v({"data-dates-input":!0,"data-read-only":$||void 0,autoComplete:"off",ref:t,value:_e,onChange:be,onBlur:je,onFocus:Pe,onClick:Se,readOnly:$,rightSection:De},o),ve),{__staticSelector:"DateInput"}))),p.createElement(V.Dropdown,{onMouseDown:s=>s.preventDefault(),"data-dates-dropdown":!0},p.createElement(Fe,T(v({__staticSelector:"DateInput"},me),{classNames:ie,styles:ce,unstyled:K,__preventFocus:!0,minDate:b,maxDate:N,locale:n,getDayProps:we,size:o.size,date:xe,onDateChange:Y}))))),p.createElement(Ve,{name:se,form:ne,value:h,type:"default"}))});ft.displayName="@mantine/dates/DateInput";const Pt=({title:e,to:t,withBorder:r})=>{const o=Te();function d(){return t?o(t):window.history.length<=1?o("/"):o(-1)}return a.jsx("header",{className:"pb-16",children:a.jsx("div",{className:Ee("px-4 fixed w-full max-w-md top-0 z-10 bg-white py-3.5",r&&"border-b border-gray-200"),children:a.jsxs("button",{onClick:d,className:"flex items-center bg-transparent",children:[a.jsx(He,{className:"text-gray-800"}),a.jsx("div",{className:"font-bold ml-4",children:e??"Kembali"})]})})})};async function gt({params:e}){return(await ke.get("/sale/summary",{params:{...e,startDate:e!=null&&e.startDate?R(e==null?void 0:e.startDate).format("YYYY-MM-DD"):"",endDate:e!=null&&e.endDate?R(e==null?void 0:e.endDate).format("YYYY-MM-DD"):""}})).data}function ht({config:e,params:t}={}){return Be({...e,queryKey:["sales-summary",t],queryFn:()=>gt({params:t})})}const St=({withProduct:e,...t})=>{var _;const{data:r,isLoading:o,isError:d}=ht({params:t}),i=r==null?void 0:r.reduce((l,n)=>[l[0]+n.quantity,l[1]+n.total],[0,0]),c=y.useId();function u(){return!e||!r?null:(r??[]).reduce((l,n)=>{const f=l.find(m=>m.id===n.id);return f?(f.quantity+=n.quantity,f.total+=n.total):l.push({id:n.id,name:n.name,quantity:n.quantity,total:n.total}),l},[])}const x=()=>a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center text-red-600",children:a.jsx("div",{className:"py-4",children:"Terjadi Kesalahan"})})}),D=()=>a.jsxs(a.Fragment,{children:[a.jsx("tr",{children:a.jsx("td",{colSpan:4,children:a.jsx("div",{className:"bg-gray-200 w-full h-4 rounded-sm animate-pulse"})})}),a.jsx("tr",{children:a.jsx("td",{colSpan:4,children:a.jsx("div",{className:"bg-gray-200 w-full h-4 rounded-sm animate-pulse"})})}),a.jsx("tr",{children:a.jsx("td",{colSpan:4,children:a.jsx("div",{className:"bg-gray-200 w-full h-4 rounded-sm animate-pulse"})})})]});return a.jsx("div",{className:"overflow-auto relative shadow-lg shadow-gray-200 bg-white rounded-md",children:a.jsxs(re,{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"whitespace-nowrap",children:"Tanggal"}),a.jsx("th",{className:"whitespace-nowrap",children:"Barang"}),a.jsx("th",{children:"Jumlah"}),a.jsx("th",{children:"Total"})]})}),a.jsxs("tbody",{children:[o&&a.jsx(D,{}),d&&a.jsx(x,{}),!o&&!d&&a.jsxs(a.Fragment,{children:[r.map(({name:l,date:n,total:f,quantity:m},b)=>a.jsxs("tr",{children:[a.jsx("td",{children:R(n,"YYYY-MM-DD").format("DD MMMM YYYY")}),a.jsx("td",{children:l}),a.jsx("td",{children:m}),a.jsx("td",{className:"text-right",children:F(f)})]},`${c}_${b}`)),(_=u())==null?void 0:_.map(l=>a.jsxs("tr",{className:"bg-gray-50 font-bold",children:[a.jsx("td",{colSpan:2,className:" text-center",children:l.name}),a.jsx("td",{className:"",children:l.quantity}),a.jsx("td",{className:"text-right",children:F(l.total)})]},l.id)),i&&i[0]?a.jsxs("tr",{children:[a.jsx("td",{colSpan:3,className:"w-full",children:a.jsx("div",{className:"font-bold text-center",children:"Total"})}),a.jsx("td",{children:a.jsx("span",{className:"font-bold text-right",children:F(i[1])})})]}):a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center",children:a.jsx("div",{className:"py-4",children:"Data tidak ditemukan"})})})]})]})]})})};export{ft as D,Pt as N,St as S,re as T,gt as g,ht as u};
