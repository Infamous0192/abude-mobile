import{c as B,r as F,u as H,R as l,T as he,a as be,b as a,g as c,s as v,d as Pe,e as we,A as xe,f as K,h as Ce,i as Se,q as Oe,C as Ie,j as je,k as s,L as $e,B as Ee,n as Ne}from"./index-37d7c688.js";import{l as Cr,m as Sr}from"./index-37d7c688.js";import{u as ke,T as ze}from"./use-form-9d9e9da1.js";import{I as T}from"./Input-792a9a59.js";import{u as Le}from"./use-uncontrolled-ca768ac3.js";var Te=Object.defineProperty,A=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,M=(e,r,t)=>r in e?Te(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ve=(e,r)=>{for(var t in r||(r={}))Ae.call(r,t)&&M(e,t,r[t]);if(A)for(var t of A(r))Me.call(r,t)&&M(e,t,r[t]);return e};function De({theme:e,color:r}){return r==="dimmed"?e.fn.dimmed():e.fn.themeColor(r||e.primaryColor,e.colorScheme==="dark"?4:7,!1,!0)}var Re=B((e,{color:r,underline:t})=>({root:Ve({backgroundColor:"transparent",cursor:"pointer",padding:0,border:0,color:De({theme:e,color:r})},e.fn.hover({textDecoration:t?"underline":"none"}))}));const We=Re;var Ze=Object.defineProperty,_=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,V=(e,r,t)=>r in e?Ze(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,D=(e,r)=>{for(var t in r||(r={}))U.call(r,t)&&V(e,t,r[t]);if(_)for(var t of _(r))Q.call(r,t)&&V(e,t,r[t]);return e},qe=(e,r)=>{var t={};for(var o in e)U.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&_)for(var o of _(e))r.indexOf(o)<0&&Q.call(e,o)&&(t[o]=e[o]);return t};const Be={underline:!0},Y=F.forwardRef((e,r)=>{const t=H("Anchor",Be,e),{component:o,className:n,unstyled:i,variant:b,size:p,color:P,underline:w}=t,d=qe(t,["component","className","unstyled","variant","size","color","underline"]),{classes:u,cx:x}=We({color:P,underline:w},{name:"Anchor",unstyled:i,variant:b,size:p}),f=o==="button"?{type:"button"}:null;return l.createElement(he,D(D({component:o||"a",ref:r,className:x(u.root,n),size:p},f),d))});Y.displayName="@mantine/core/Anchor";const Fe=be(Y),He=({reveal:e,size:r})=>l.createElement("svg",{width:r,height:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:e?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}));var Ke=Object.defineProperty,Ue=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,W=(e,r,t)=>r in e?Ke(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,$=(e,r)=>{for(var t in r||(r={}))Ye.call(r,t)&&W(e,t,r[t]);if(R)for(var t of R(r))Ge.call(r,t)&&W(e,t,r[t]);return e},Z=(e,r)=>Ue(e,Qe(r)),Je=B((e,{rightSectionWidth:r},{size:t})=>({visibilityToggle:{},input:{position:"relative",overflow:"hidden"},innerInput:Z($($({},e.fn.fontStyles()),e.fn.cover(0)),{backgroundColor:"transparent",border:`${a(1)} solid transparent`,borderLeftWidth:0,borderRightWidth:0,boxSizing:"border-box",display:"block",width:`calc(100% - ${a(r)})`,paddingLeft:`calc(${c({size:t,sizes:v})}  / 3)`,fontSize:c({size:t,sizes:e.fontSizes}),height:`calc(${c({size:t,sizes:v})} - ${a(2)})`,lineHeight:`calc(${c({size:t,sizes:v})} - ${a(4)})`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&::-ms-reveal, &::-ms-clear":{display:"none"},"&:focus":{outline:0},"&:disabled":{cursor:"not-allowed",pointerEvents:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,"&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":Z($({},e.fn.placeholderStyles()),{opacity:1}),"&[data-invalid]":{color:e.fn.variant({variant:"filled",color:"red"}).background,"&::placeholder":{opacity:1,color:e.fn.variant({variant:"filled",color:"red"}).background}},"&[data-with-icon]":{paddingLeft:c({size:t,sizes:v})}})}));const Xe=Je;var er=Object.defineProperty,rr=Object.defineProperties,tr=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,q=(e,r,t)=>r in e?er(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,y=(e,r)=>{for(var t in r||(r={}))G.call(r,t)&&q(e,t,r[t]);if(h)for(var t of h(r))J.call(r,t)&&q(e,t,r[t]);return e},or=(e,r)=>rr(e,tr(r)),ar=(e,r)=>{var t={};for(var o in e)G.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&h)for(var o of h(e))r.indexOf(o)<0&&J.call(e,o)&&(t[o]=e[o]);return t};const sr={xs:a(22),sm:a(26),md:a(28),lg:a(32),xl:a(40)},nr={xs:a(12),sm:a(15),md:a(17),lg:a(19),xl:a(21)},ir={xs:a(28),sm:a(32),md:a(34),lg:a(44),xl:a(54)},lr={size:"sm",toggleTabIndex:-1,visibilityToggleIcon:He,__staticSelector:"PasswordInput"},X=F.forwardRef((e,r)=>{const t=H("PasswordInput",lr,e),{radius:o,disabled:n,size:i,toggleTabIndex:b,className:p,id:P,label:w,error:d,required:u,style:x,icon:f,description:ee,wrapperProps:re,classNames:C,styles:S,variant:O,visibilityToggleIcon:te,__staticSelector:E,rightSection:gr,rightSectionWidth:mr,rightSectionProps:vr,sx:oe,labelProps:ae,descriptionProps:se,errorProps:ne,unstyled:g,visibilityToggleLabel:N,withAsterisk:ie,inputContainer:le,iconWidth:ce,inputWrapperOrder:de,visible:pe,defaultVisible:ue,onVisibilityChange:fe}=t,ge=ar(t,["radius","disabled","size","toggleTabIndex","className","id","label","error","required","style","icon","description","wrapperProps","classNames","styles","variant","visibilityToggleIcon","__staticSelector","rightSection","rightSectionWidth","rightSectionProps","sx","labelProps","descriptionProps","errorProps","unstyled","visibilityToggleLabel","withAsterisk","inputContainer","iconWidth","inputWrapperOrder","visible","defaultVisible","onVisibilityChange"]),k=c({size:i,sizes:ir}),{classes:I}=Xe({rightSectionWidth:k},{name:"PasswordInput",classNames:C,styles:S,unstyled:g,size:i,variant:O}),z=Pe(P),{systemStyles:me,rest:ve}=we(ge),[j,ye]=Le({value:pe,defaultValue:ue,finalValue:!1,onChange:fe}),L=()=>ye(!j),_e=l.createElement(xe,{className:I.visibilityToggle,tabIndex:b,radius:o,size:c({size:i,sizes:sr}),"aria-hidden":!N,"aria-label":N,unstyled:g,onMouseDown:m=>{m.preventDefault(),L()},onKeyDown:m=>{m.key===" "&&(m.preventDefault(),L())}},l.createElement(te,{reveal:j,size:c({size:i,sizes:nr})}));return l.createElement(T.Wrapper,y(y({required:u,id:z,label:w,error:d,description:ee,size:i,className:p,style:x,classNames:C,styles:S,__staticSelector:E,sx:oe,errorProps:ne,descriptionProps:se,labelProps:ae,unstyled:g,withAsterisk:ie,inputWrapperOrder:de,inputContainer:le,variant:O},me),re),l.createElement(T,{component:"div",error:d,icon:f,size:i,classNames:or(y({},C),{input:I.input}),styles:S,radius:o,disabled:n,__staticSelector:E,rightSectionWidth:k,rightSection:!n&&_e,variant:O,unstyled:g,iconWidth:ce},l.createElement("input",y({type:j?"text":"password",required:u,"data-invalid":!!d||void 0,"data-with-icon":!!f||void 0,className:I.innerInput,disabled:n,id:z,ref:r},ve))))});X.displayName="@mantine/core/PasswordInput";var cr=K("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),dr=K("lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]);async function pr({data:e}){return(await je.post("/auth/login",e)).data}function ur({config:e}={}){return Ce(pr,{onSuccess:({creds:r,token:t})=>{if(r.role!="employee")throw{message:"Hanya pegawai yang bisa login"};Se.setToken(t),Oe.invalidateQueries([Ie])},...e})}const fr=()=>{const e=ke({initialValues:{username:"",password:""}}),r=ur();async function t(o){o.preventDefault(),await r.mutateAsync({data:e.values},{onError:({response:n,message:i})=>{n!=null&&n.data.errors?e.setErrors(n.data.errors):Ne.show({message:i,color:"red"})}})}return s.jsxs("form",{onSubmit:t,children:[s.jsx("div",{className:"mb-4",children:s.jsx(ze,{name:"username",placeholder:"Username",icon:s.jsx(cr,{size:14}),...e.getInputProps("username")})}),s.jsx("div",{className:"mb-2",children:s.jsx(X,{name:"password",placeholder:"Password",icon:s.jsx(dr,{size:14}),...e.getInputProps("password")})}),s.jsx("div",{className:"mb-4 flex justify-end text-sm",children:s.jsx(Fe,{component:$e,to:"/",children:"Lupa Password?"})}),s.jsx(Ee,{type:"submit",fullWidth:!0,loading:r.isLoading,children:"Masuk"})]})},Pr=()=>s.jsxs("main",{className:"w-full mx-auto px-6 py-6 pb-14",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("img",{src:"/images/abude-logo.png",alt:"",className:"w-16"})}),s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Login"}),s.jsx(fr,{})]});export{Cr as AuthProvider,Pr as Login,fr as LoginForm,Sr as useAuth};
